<nz-modal [nzVisible]="true" nzTitle="数据处理"
  (nzOnCancel)="dataHandleCancel()"
  (nzOnOk)="dataHandleOk()"
  nzWidth="85%"
  [nzMaskClosable]="false">
  <nz-radio-group [(ngModel)]="exportMode" (ngModelChange)="selectEM()">
    <label nz-radio [nzValue]="1">导出表格</label>
    <label nz-radio [nzValue]="2">导出数据</label>
    <label nz-radio [nzValue]="3">导入</label>
  </nz-radio-group>

  <div *ngIf="e.isWindows">
    <nz-divider nzText="选择导出位置" ></nz-divider>
    <div class="windows-select">
      <div class="item">
        <p>保存路径：{{savePath}}</p>
        <button nz-button nzType="primary" (click)="selectSavePath()">选择导出保存路径</button>
      </div>
      <div class="item" *ngIf="exportMode === 1">
        <p>保存路径：{{tempPath}}</p>
        <button nz-button nzType="primary" (click)="selectTemp()">选择导出模板</button>
      </div>
    </div>

  </div>

  <!-- <nz-divider nzText="选择处理数据"></nz-divider>
  <nz-checkbox-wrapper style="width: 100%;">
    <label nz-checkbox [(ngModel)]="dataProcessing.task" (ngModelChange)="onSelectClass($event, 'task')">任 务</label>
    <label nz-checkbox [(ngModel)]="dataProcessing.project"
      (ngModelChange)="onSelectClass($event, 'project')">项目</label>
    <label nz-checkbox [(ngModel)]="dataProcessing.component"
      (ngModelChange)="onSelectClass($event, 'component')">构建</label>
    <label nz-checkbox [(ngModel)]="dataProcessing.jack" (ngModelChange)="onSelectClass($event, 'jack')">顶</label>
  </nz-checkbox-wrapper> -->
  <br>
  <br>
  <div>
    <nz-checkbox-wrapper style="width: 100%;" (nzOnChange)="onTaskFliter($event)">
      <label nz-checkbox nzValue="0">已导出</label>
      <label nz-checkbox nzValue="1">未导出</label>
      <!-- <label nz-checkbox nzValue="2">已张拉</label>
      <label nz-checkbox nzValue="3">未张拉</label> -->
    </nz-checkbox-wrapper>
    <div *ngIf="savePath && tempPath">
      <nz-radio-group [(ngModel)]="taskData.sp" (ngModelChange)="selectTaskProject($event)">
        <label nz-radio [nzValue]="p.key" *ngFor="let p of taskData.project">{{p.title}}</label>
      </nz-radio-group>
      <hr>
      <nz-radio-group [(ngModel)]="taskData.sc" (ngModelChange)="selectTaskComponent($event)">
        <label nz-radio [nzValue]="c" *ngFor="let c of taskData.component">{{c}}</label>
      </nz-radio-group>
      <hr>
      <div style="display: flex;flex-wrap: wrap;">
        <div *ngFor="let b of taskData.bridge; index as i" style="margin: 0 15px 15px 0;">
          <label
            class="checkbox"
            [ngClass]="{'check': taskData.sb.indexOf(b.id) > -1}"
          >
            <input
              type="checkbox"
              name="brigeBox"
              [checked]="taskData.sb.indexOf(b.id) > -1"
              (click)="setBridge(b)"
              [value]="b.id"
            />
            {{b.name}}
          </label>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="taskData.sb.length > 0" style="display: flex; align-items: center;">
    <button nz-button nzType="primary" (click)="exportOk()" *ngIf="progress.msg === '导出'" [disabled]="!(taskData.sb.length > 0)" [nzLoading]="progress.state">{{progress.msg}}</button>
    <span *ngIf="progress.msg === '导出完成'">{{progress.msg}}{{progress.now}}条</span>
    <nz-progress [nzPercent]="progress.now / progress.length * 100" style="flex: 1; margin-left: 15px;" ></nz-progress>
    <span>{{progress.length}} / {{progress.now}}</span>
  </div>
</nz-modal>
